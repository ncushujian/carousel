!function(t,i){void 0===i&&(i={});var e=i.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===e&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(".img-box {\n  font-size: 0;\n  white-space: nowrap; \n}\n\n.img-box .duplicate-slider, .img-box .carousel-slider {\n  display: inline-block;\n  vertical-align: top;\n  width: 100%;\n}\n\n.img-box .carousel-img, .img-box .duplicate-img {\n  width: 100%;\n}\n\n.indicator-list {\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  left: 50%;\n  bottom: 20px;\n  transform: translateX(-50%);\n  -webkit-transform: translateX(-50%);\n}\n\n.indicator-item {\n  display: inline-block;\n  margin: 0 3px;\n  width: 10px;\n  height: 3px;\n  background-color: rgba(255, 255, 255, .6);\n}\n\n.indicator-item.active {\n  background-color: #fde23d;\n}",{});var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return t={passive:!0},!0}});addEventListener("test",null,i)}catch(t){}function e(t){this.opt=t||{},this.timer=null,this.stopPos=0,this.startPos=0,this.curImgIndex=1,this.firstInit=!0,void 0===this.opt.autoPlay&&(this.opt.autoPlay=!0),void 0===this.opt.showIndicator&&(this.opt.showIndicator=!0)}e.prototype.autoPlay=function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){t.change(1)}),this.opt.delay||3500)},e.prototype.createDuplicateSlider=function(t){var i=t.getElementsByClassName("carousel-img")[0],e=document.createElement("div");e.className="duplicate-slider";var s=document.createElement("img");return s.className="duplicate-img",s.src=i.src,e.appendChild(s),e},e.prototype.transform=function(t){this.imgBoxDom.style.webkitTransform="translate3d("+t+"px, 0, 0)",this.stopPos=t},e.prototype.change=function(t){var i=this;this.updateIndicator(t),this.imgBoxDom.style.transitionDuration="0.3s",this.curImgIndex+=t,this.opt.sliderChange&&this.opt.sliderChange(this.getIndicatorIndex(this.curImgIndex)),this.transform(-this.curImgIndex*this.w),i.timer&&setTimeout((function(){i.loop()}),300)},e.prototype.loop=function(){this.imgBoxDom.style.transitionDuration="0s",this.curImgIndex>=this.sliderLen+1&&(this.transform(-this.w),this.curImgIndex=1),this.curImgIndex<=0&&(this.transform(-this.w*this.sliderLen),this.curImgIndex=this.sliderLen)},e.prototype.initCarousel=function(){var i=this.wrapDom,e=0,s=0,n=this;i.addEventListener("touchstart",(function(t){n.loop(),n.startPos=n.stopPos,e=t.touches[0].pageX,s=(new Date).getTime(),clearInterval(n.timer),n.timer=null}),t),i.addEventListener("touchmove",(function(t){var i=t.touches[0].pageX-e,s=n.startPos+i;n.transform(s)}),t),i.addEventListener("touchend",(function(){var t=n.stopPos-n.startPos,i=t>0?-1:1;(new Date).getTime()-s<300&&Math.abs(t)>5||Math.abs(t)>=n.w/2?n.change(i):n.change(0),n.opt.autoPlay&&n.autoPlay()}),t)},e.prototype.createIndicator=function(){for(var t="",i=this.wrapDom.lastElementChild,e=0;e<this.sliderLen;e++)t+='<li class="indicator-item '+(e===this.getIndicatorIndex(this.curImgIndex)?"active":"")+'"></li>';i.innerHTML=t},e.prototype.getIndicatorIndex=function(t){var i=0;return 0===t&&(i=this.sliderLen-1),t>0&&t<=this.sliderLen&&(i=t-1),i},e.prototype.updateIndicator=function(t){this.opt.showIndicator&&(this.indicatorItemDom||(this.indicatorItemDom=this.wrapDom.getElementsByClassName("indicator-item")),this.indicatorItemDom[this.getIndicatorIndex(this.curImgIndex)].classList.remove("active"),this.indicatorItemDom[this.getIndicatorIndex(this.curImgIndex+t)].classList.add("active"))},e.prototype.init=function(t){this.wrapDom=t,this.imgBoxDom=this.wrapDom.getElementsByClassName("img-box")[0],this.w=this.opt.width||this.wrapDom.clientWidth,this.wrapDom.style.width=this.w+"px";var i=this.wrapDom.getElementsByClassName("carousel-slider");this.sliderLen=i.length;var e=this.wrapDom.getElementsByClassName("duplicate-slider");this.firstInit?(this.firstInit=!1,this.stopPos=-this.w,this.startPos=-this.w,this.imgBoxDom.insertBefore(this.createDuplicateSlider(i[this.sliderLen-1]),i[0]),this.imgBoxDom.appendChild(this.createDuplicateSlider(i[0])),this.initCarousel()):(this.imgBoxDom.replaceChild(this.createDuplicateSlider(i[this.sliderLen-1]),e[0]),"duplicate-slider"!==this.imgBoxDom.lastElementChild.className&&this.imgBoxDom.appendChild(e[1])),this.curImgIndex>=this.sliderLen+1&&(this.curImgIndex=1),this.imgBoxDom.style.webkitTransform="translate3d(-"+this.w*this.curImgIndex+"px, 0, 0)",this.opt.showIndicator&&this.createIndicator(),this.opt.autoPlay&&this.autoPlay()};export default e;
